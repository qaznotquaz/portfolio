{% assign collection=site.collections | where: "label", page.collection | first %}
{% assign sorted=collection.docs | sort: "index" %}

<ul>
    <li id='sidebar-title'><a>Documents in Project</a></li>
    {% for entry in sorted %}
        {% if entry.title == page.title %}
            {% assign classes=' active' %}
        {% else %}
            {% assign classes=' inactive' %}
        {% endif %}

        {% if entry.category %}
            {% if entry.title == entry.category %}
                {% assign classes=classes | append: ' category' %}
            {% else %}
                {% assign classes=classes | append: ' indent' %}
            {% endif %}
        {% endif %}

        {% if entry.title == page.title %}
            <li class="sidebar-title{{ classes }} active">
                <a>{{ entry.title }}</a>
            </li>
        {% else %}
            <li class="sidebar-title{{ classes }} inactive">
                {% assign link='' | append: site.baseurl | append: entry.url %}
                <a href="{{ link }}">{{ entry.title }}</a>
            </li>
        {% endif %}
    {% endfor %}
</ul>
